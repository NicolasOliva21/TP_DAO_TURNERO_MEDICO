{% extends "base.html" %}
{% block header %}Turnos{% endblock %}

{% block content %}
<!-- Hero con imagen y gradiente -->
<div class="hero rounded-2xl p-6 md:p-8 text-white relative overflow-hidden">
  <div class="absolute inset-0 opacity-15">
    <!-- textura sutil -->
    <svg viewBox="0 0 1200 120" preserveAspectRatio="none" class="w-full h-full"><path d="M0,0V46.29c47.09,22.2,103,29.59,158,17,70-15.79,136.06-57.51,206-66C438,0,512,32,585,49.79,711,80,839,68,965,41.86,1023,29.39,1080,12,1200,0V0Z" opacity=".25" fill="#fff"/></svg>
  </div>
  <div class="relative">
    <div class="text-2xl md:text-3xl font-bold">Agenda de turnos</div>
    <p class="text-sm md:text-base opacity-90 mt-1">Buscá horarios disponibles por médico, fecha y duración.</p>
    <div class="mt-3 space-x-2">
      <span class="chip">Sin superposiciones</span>
      <span class="chip">Actualizado en vivo</span>
      <span class="chip">UI accesible</span>
    </div>
  </div>
</div>

<!-- Panel de filtros (glass) -->
<div class="glass rounded-2xl p-5 mt-4">
  <form id="filters" class="grid md:grid-cols-6 gap-3 items-end"
        hx-get="/turnos/_grid"
        hx-target="#grid"
        hx-swap="innerHTML"
        hx-trigger="change, keyup delay:300ms from:#filters">
    <div class="md:col-span-2">
      <label class="lbl text-slate-700">Médico</label>
      <select name="medico_id" class="input" required>
        <option value="" selected disabled>Seleccioná un médico</option>
        {% for m in medicos %}
        <option value="{{ m.id }}">{{ m.apellido }}, {{ m.nombre }} ({{ m.matricula }})</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label class="lbl text-slate-700">Fecha</label>
      <input type="date" name="fecha" class="input" required>
    </div>
    <div>
      <label class="lbl text-slate-700">Duración</label>
      <select name="duracion_min" class="input">
        <option value="15">15 min</option>
        <option value="20">20 min</option>
        <option value="30" selected>30 min</option>
        <option value="45">45 min</option>
        <option value="60">60 min</option>
      </select>
    </div>
    <div>
      <label class="lbl text-slate-700">Inicio</label>
      <input type="time" name="inicio" class="input" value="09:00">
    </div>
    <div>
      <label class="lbl text-slate-700">Fin</label>
      <input type="time" name="fin" class="input" value="17:00">
    </div>
    <div class="md:col-span-6 text-right">
      <span class="text-xs text-slate-600">Tip: podés refrescar con <span class="kbd">Ctrl</span> + <span class="kbd">R</span></span>
    </div>
  </form>
</div>

<!-- Grilla de slots -->
<div id="grid" class="mt-5" hx-get="/turnos/_grid" hx-target="#grid" hx-swap="innerHTML" hx-trigger="load">
  <!-- partial -->
</div>
{% endblock %}
